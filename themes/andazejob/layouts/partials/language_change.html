{{ $Scratch := newScratch}}
{{ if .IsTranslated }}
    <select class="border-0 langselector" onchange="location = this.value;">
        {{ $siteLanguages := site.Languages}}
        {{ $pageLang := .Page.Lang}}
        
        {{ range .Page.AllTranslations }}
            {{ $translation := .}}
            {{ if eq (print site.Language) ("en") }}
                {{$changeurl:= replace $translation.Permalink "/job/ja/" "/ja/job/" }}
                {{ $Scratch.Set "changeurl" $changeurl }}
            {{ else }}
                {{$changeurl:= replace $translation.Permalink "/job/en/" "/en/job/" }}
                {{ $Scratch.Set "changeurl" $changeurl }}
            {{ end }}
        
            {{ $langurl := $Scratch.Get "changeurl" }}
            
            {{ range $siteLanguages }}
                {{ if eq $translation.Lang .Lang }}
                    {{ $selected := false }}
                    {{ if eq $pageLang .Lang}}
                            <option value="{{ $langurl }}" selected>{{ .LanguageName }}</option>
                    {{ else }}
                            <option value="{{ $langurl }}">{{ .LanguageName }}</option>
                    {{ end }}
                {{ end }}
            {{ end }}
        {{ end }}
    </select>
{{ end }}
